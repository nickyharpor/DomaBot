# Orderbook API

## Create Listing

> Create a fixed priced listing on a supported orderbook (OpenSea, Doma).

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/list":{"post":{"description":"Create a fixed priced listing on a supported orderbook (OpenSea, Doma).","operationId":"OrderbookApiController_createListing","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"orderbook":{"type":"string","description":"Orderbook identifier."},"chainId":{"type":"string","description":"Chain ID in CAIP-2 format.","pattern":"^[a-z0-9]+:[a-zA-Z0-9]+$"},"parameters":{"description":"Order parameters.","allOf":[{"type":"object","properties":{"offerer":{"type":"string","description":"Address of the offerer."},"zone":{"type":"string","description":"Zone address."},"orderType":{"type":"number","description":"Type of order.","enum":[0,1,2,3]},"startTime":{"type":"string","description":"Start time of the order (Unix timestamp as string)."},"endTime":{"type":"string","description":"End time of the order (Unix timestamp as string)."},"zoneHash":{"type":"string","description":"Zone hash."},"salt":{"type":"string","description":"Salt for the order."},"offer":{"description":"Array of offer items.","items":{"type":"array"},"type":"array"},"consideration":{"description":"Array of consideration items. Considerations must include following fee items: Doma Marketplace fee, Name Token Royalties, OpenSea Fees (only for OpenSea Orderbook).","items":{"type":"array"},"type":"array"},"totalOriginalConsiderationItems":{"type":"number","description":"Total number of original consideration items."},"conduitKey":{"type":"string","description":"Conduit key."},"counter":{"type":"string","description":"Counter for the order (as string)."}},"required":["offerer","zone","orderType","startTime","endTime","zoneHash","salt","offer","consideration","totalOriginalConsiderationItems","conduitKey","counter"]}]},"signature":{"type":"string","description":"Order signature."}},"required":["orderbook","chainId","parameters","signature"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string","description":"The unique identifier for the created order."}},"required":["orderId"]}}}},"400":{"description":"Bad Request. Invalid query parameters."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Create Listing","tags":["Orderbook API"]}}}}
```

## Create Offer

> Create an offer on a supported orderbook (OpenSea, Doma).

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/offer":{"post":{"description":"Create an offer on a supported orderbook (OpenSea, Doma).","operationId":"OrderbookApiController_createOffer","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"orderbook":{"type":"string","description":"Orderbook identifier."},"chainId":{"type":"string","description":"Chain ID in CAIP-2 format.","pattern":"^[a-z0-9]+:[a-zA-Z0-9]+$"},"parameters":{"description":"Order parameters.","allOf":[{"type":"object","properties":{"offerer":{"type":"string","description":"Address of the offerer."},"zone":{"type":"string","description":"Zone address."},"orderType":{"type":"number","description":"Type of order.","enum":[0,1,2,3]},"startTime":{"type":"string","description":"Start time of the order (Unix timestamp as string)."},"endTime":{"type":"string","description":"End time of the order (Unix timestamp as string)."},"zoneHash":{"type":"string","description":"Zone hash."},"salt":{"type":"string","description":"Salt for the order."},"offer":{"description":"Array of offer items.","items":{"type":"array"},"type":"array"},"consideration":{"description":"Array of consideration items. Considerations must include following fee items: Doma Marketplace fee, Name Token Royalties, OpenSea Fees (only for OpenSea Orderbook).","items":{"type":"array"},"type":"array"},"totalOriginalConsiderationItems":{"type":"number","description":"Total number of original consideration items."},"conduitKey":{"type":"string","description":"Conduit key."},"counter":{"type":"string","description":"Counter for the order (as string)."}},"required":["offerer","zone","orderType","startTime","endTime","zoneHash","salt","offer","consideration","totalOriginalConsiderationItems","conduitKey","counter"]}]},"signature":{"type":"string","description":"Order signature."}},"required":["orderbook","chainId","parameters","signature"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string","description":"The unique identifier for the created offer."}},"required":["orderId"]}}}},"400":{"description":"Bad Request. Invalid query parameters."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Create Offer","tags":["Orderbook API"]}}}}
```

## Get Listing fulfillment data

> Get listing fulfillment data by order id and buyer address.

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/listing/{orderId}/{buyer}":{"get":{"description":"Get listing fulfillment data by order id and buyer address.","operationId":"OrderbookApiController_getListingById","parameters":[{"name":"orderId","required":true,"in":"path","description":"The Order ID of the listing.","schema":{"type":"string"}},{"name":"buyer","required":true,"in":"path","description":"Buyer address, in native chain format.","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"parameters":{"description":"Order parameters.","allOf":[{"type":"object","properties":{"offerer":{"type":"string","description":"Address of the offerer."},"zone":{"type":"string","description":"Zone address."},"orderType":{"type":"number","description":"Type of order.","enum":[0,1,2,3]},"startTime":{"type":"string","description":"Start time of the order (Unix timestamp as string)."},"endTime":{"type":"string","description":"End time of the order (Unix timestamp as string)."},"zoneHash":{"type":"string","description":"Zone hash."},"salt":{"type":"string","description":"Salt for the order."},"offer":{"description":"Array of offer items.","items":{"type":"array"},"type":"array"},"consideration":{"description":"Array of consideration items. Considerations must include following fee items: Doma Marketplace fee, Name Token Royalties, OpenSea Fees (only for OpenSea Orderbook).","items":{"type":"array"},"type":"array"},"totalOriginalConsiderationItems":{"type":"number","description":"Total number of original consideration items."},"conduitKey":{"type":"string","description":"Conduit key."},"counter":{"type":"string","description":"Counter for the order (as string)."}},"required":["offerer","zone","orderType","startTime","endTime","zoneHash","salt","offer","consideration","totalOriginalConsiderationItems","conduitKey","counter"]}]},"signature":{"type":"string","description":"Order signature."}},"required":["parameters","signature"]}}}},"400":{"description":"Bad Request. Invalid query parameters."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Get Listing fulfillment data","tags":["Orderbook API"]}}}}
```

## Get Offer fulfillment data

> Get offer fulfillment data by order id and fulfiller (token owner) address.

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/offer/{orderId}/{fulfiller}":{"get":{"description":"Get offer fulfillment data by order id and fulfiller (token owner) address.","operationId":"OrderbookApiController_getOfferById","parameters":[{"name":"orderId","required":true,"in":"path","description":"The Order ID of the offer.","schema":{"type":"string"}},{"name":"fulfiller","required":true,"in":"path","description":"Fulfiller address, in native chain format. This is the address that owns the name token.","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"parameters":{"description":"Order parameters.","allOf":[{"type":"object","properties":{"offerer":{"type":"string","description":"Address of the offerer."},"zone":{"type":"string","description":"Zone address."},"orderType":{"type":"number","description":"Type of order.","enum":[0,1,2,3]},"startTime":{"type":"string","description":"Start time of the order (Unix timestamp as string)."},"endTime":{"type":"string","description":"End time of the order (Unix timestamp as string)."},"zoneHash":{"type":"string","description":"Zone hash."},"salt":{"type":"string","description":"Salt for the order."},"offer":{"description":"Array of offer items.","items":{"type":"array"},"type":"array"},"consideration":{"description":"Array of consideration items. Considerations must include following fee items: Doma Marketplace fee, Name Token Royalties, OpenSea Fees (only for OpenSea Orderbook).","items":{"type":"array"},"type":"array"},"totalOriginalConsiderationItems":{"type":"number","description":"Total number of original consideration items."},"conduitKey":{"type":"string","description":"Conduit key."},"counter":{"type":"string","description":"Counter for the order (as string)."}},"required":["offerer","zone","orderType","startTime","endTime","zoneHash","salt","offer","consideration","totalOriginalConsiderationItems","conduitKey","counter"]}]},"signature":{"type":"string","description":"Order signature."}},"required":["parameters","signature"]}}}},"400":{"description":"Bad Request. Invalid query parameters."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Get Offer fulfillment data","tags":["Orderbook API"]}}}}
```

## Cancel Listing

> Cancel a listing on a supported orderbook (OpenSea, Doma).

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/listing/cancel":{"post":{"description":"Cancel a listing on a supported orderbook (OpenSea, Doma).","operationId":"OrderbookApiController_cancelListing","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string","description":"The Order ID to cancel."},"signature":{"type":"string","description":"EIP-712 signature for cancel authorization."}},"required":["orderId","signature"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string","description":"The cancelled order ID."}},"required":["orderId"]}}}},"400":{"description":"Bad Request. Invalid signature or order not found."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Cancel Listing","tags":["Orderbook API"]}}}}
```

## Cancel Offer

> Cancel an offer on a supported orderbook (OpenSea, Doma).

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/offer/cancel":{"post":{"description":"Cancel an offer on a supported orderbook (OpenSea, Doma).","operationId":"OrderbookApiController_cancelOffer","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string","description":"The Order ID to cancel."},"signature":{"type":"string","description":"EIP-712 signature for cancel authorization."}},"required":["orderId","signature"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string","description":"The cancelled order ID."}},"required":["orderId"]}}}},"400":{"description":"Bad Request. Invalid signature or order not found."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Cancel Offer","tags":["Orderbook API"]}}}}
```

## Get orderbook fees

> Get marketplace fees for a specific orderbook and chain.

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/fee/{orderbook}/{chainId}/{contractAddress}":{"get":{"description":"Get marketplace fees for a specific orderbook and chain.","operationId":"OrderbookApiController_getOrderbookFee","parameters":[{"name":"orderbook","required":true,"in":"path","description":"The orderbook type","schema":{"type":"string"}},{"name":"chainId","required":true,"in":"path","description":"The chain ID in CAIP-2 format","schema":{"type":"string"}},{"name":"contractAddress","required":true,"in":"path","description":"The contract address of the token being listed or offered.","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"marketplaceFees":{"description":"Array of marketplace fees.","items":{"type":"array"},"type":"array"}},"required":["marketplaceFees"]}}}},"400":{"description":"Bad Request. Invalid path parameters."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Get orderbook fees","tags":["Orderbook API"]}}}}
```

## Get supported currencies

> Get all supported currency tokens for orderbook operations on a specific chain.

OpenAPI:

```json
{"openapi":"3.0.0","info":{"title":"Doma Registrar API","version":"1.0"},"servers":[{"url":"https://api-testnet.doma.xyz","name":"Doma Testnet API"}],"security":[{"Api-Key":[]}],"components":{"securitySchemes":{"Api-Key":{"type":"apiKey","in":"header","name":"Api-Key"}}},"paths":{"/v1/orderbook/currencies/{chainId}/{contractAddress}/{orderbook}":{"get":{"description":"Get all supported currency tokens for orderbook operations on a specific chain.","operationId":"OrderbookApiController_getSupportedCurrencies","parameters":[{"name":"chainId","required":true,"in":"path","description":"The chain ID in CAIP-2 format","schema":{"type":"string"}},{"name":"contractAddress","required":true,"in":"path","description":"The contract address of the token.","schema":{"type":"string"}},{"name":"orderbook","required":true,"in":"path","description":"The name of the orderbook.","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"currencies":{"description":"List of supported currency tokens for orderbook operations.","items":{"type":"array"},"type":"array"}},"required":["currencies"]}}}},"400":{"description":"Bad Request. Invalid chain ID format."},"401":{"description":"Unauthorized. API Key is missing or invalid."},"403":{"description":"Forbidden. API Key is missing 'ORDERBOOK' permission."}},"summary":"Get supported currencies","tags":["Orderbook API"]}}}}
```
